# 🧍 Singleton Pattern in Unity

## 📖 설명
싱글톤(Singleton) 패턴은 클래스의 인스턴스를 **오직 하나만 생성**하고,  
**전역적으로 접근 가능한 구조**를 제공하는 디자인 패턴입니다.

유니티에서는 다음과 같은 역할에 널리 사용됩니다:

## 🧠 사용 예
- 씬 전환에도 유지되는 GameManager
- AudioManager, BGMManager 등 전역 제어
- UI Root, 데이터 매니저, 이벤트 브로커 등

---

## 🔁 구현 예제

### 🔸 Singleton_Basic

전형적인 MonoBehaviour 싱글톤입니다.  
`Instance`로 전역 접근하며, `DontDestroyOnLoad`를 통해 씬 전환 후에도 유지됩니다.

📄 파일: `Singleton_Basic.cs`

---

### 🔸 Singleton_PrefabSpawner + BGMManager

`Singleton_PrefabSpawner`는 여러 싱글톤 프리팹을 한 번만 Instantiate하는 책임만 가집니다.  
실제 기능과 전역 접근은 프리팹 내부의 `BGMManager`가 담당합니다.  
생성과 관리 책임을 분리한 구조입니다.

📄 파일:
- `Singleton_PrefabSpawner.cs`
- `BGMManager.cs`

---

## 📊 구현 비교 요약

| 구현 방식                      | 전역 접근 | 중복 방지 | 구조 분리 | 추천 상황                          |
|-------------------------------|------------|------------|-------------|-------------------------------------|
| `Singleton_Basic`             | ✅         | ❌         | ❌          | 수동 배치된 전역 매니저에 적합         |
| `PrefabSpawner + BGMManager`  | ✅         | ✅         | ✅          | 구조적 확장성 필요, 프리팹 기반 관리 |

---

## 👍 장점

| 항목              | 설명 |
|-------------------|------|
| ✅ 전역 접근        | `Instance`를 통해 어디서든 접근 가능 |
| ✅ 단일 인스턴스 보장 | 중복 방지로 상태 충돌 예방 |
| ✅ 상태 공유 편리     | 게임 설정, 사운드, 게임 진행 정보 등 |
| ✅ 생명주기 제어 용이  | `DontDestroyOnLoad`와 함께 사용 시 유지됨 |

---

## ⚠️ 단점

| 항목                     | 설명 |
|--------------------------|------|
| ❌ 숨은 의존성 증가         | 전역 접근으로 인해 연결 관계 추적 어려움 |
| ❌ 테스트 어려움           | 모킹(mocking)이나 단위 테스트 어렵고, 구조 고정됨 |
| ❌ 초기화 순서 불확실       | 다른 싱글톤 간 참조 순서가 꼬이면 `null` 오류 발생 가능 |
| ❌ 남용 위험               | 모든 걸 싱글톤으로 만들면 전체 시스템이 하나의 전역 상태처럼 됨 |
| ❌ 메모리 누적 위험        | DontDestroyOnLoad + static 구조로 인해 메모리에서 사라지지 않음. 싱글톤이 많아지면 오히려 메모리 낭비 가능 |


---

## ✅ 팁: 안전한 사용을 위한 권장 사항

- 싱글톤은 진짜 전역 관리가 필요한 **핵심 매니저**에만 사용
- **생성과 기능을 분리**해 구조적 책임을 명확히
- 가능하면 의존성 주입(DI)이나 ScriptableObject와 병행 고려
- 단위 테스트가 필요한 시스템은 싱글톤 대신 인터페이스 기반 설계 권장

